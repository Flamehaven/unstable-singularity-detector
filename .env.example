# ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
# Unstable Singularity Detector - Configuration Template
# ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
# Copy this file to .env and customize for your environment
# NEVER commit .env to version control!

# ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
# WEB INTERFACE (Optional)
# ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
# Uncomment to enable web authentication
# WEB_USERNAME=admin
# WEB_PASSWORD=changeme_in_production

# ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
# COMPUTATION SETTINGS
# ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
DEVICE=cuda  # cuda, cpu, mps (Apple Silicon)
PRECISION=float64  # float32, float64
PRECISION_TARGET=1e-13
MAX_ITERATIONS=100000

# GPU Settings (if using CUDA)
CUDA_VISIBLE_DEVICES=0
CUDA_LAUNCH_BLOCKING=0

# ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
# EXPERIMENT TRACKING
# ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
MLFLOW_TRACKING_URI=http://localhost:5000
MLFLOW_EXPERIMENT_NAME=unstable_singularities
MLFLOW_ENABLE=false  # Set to true to enable MLflow tracking

# ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
# PERFORMANCE TUNING
# ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
OMP_NUM_THREADS=8
MKL_NUM_THREADS=8
PYTORCH_CUDA_ALLOC_CONF=max_split_size_mb:512

# ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
# LOGGING
# ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
LOG_LEVEL=INFO  # DEBUG, INFO, WARNING, ERROR, CRITICAL
LOG_FILE=logs/detector.log
LOG_FORMAT=%(asctime)s [%(levelname)s] %(name)s: %(message)s

# ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
# PATHS
# ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
CHECKPOINT_DIR=checkpoints/
OUTPUT_DIR=outputs/
DATA_DIR=data/
CONFIG_DIR=configs/

# Checkpoint Settings
CHECKPOINT_FREQUENCY=1000  # Save every N iterations
KEEP_LAST_N_CHECKPOINTS=5

# ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
# REPRODUCIBILITY
# ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
RANDOM_SEED=2025
DETERMINISTIC=true  # Enable deterministic algorithms
BENCHMARK=false  # Disable cuDNN benchmark for reproducibility

# ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
# RATE LIMITING (Production Only)
# ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
RATE_LIMIT_ENABLED=false
MAX_REQUESTS_PER_MINUTE=10

# ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
# DEVELOPMENT / DEBUG
# ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
DEBUG=false
PROFILE=false  # Enable profiling
VALIDATE_GRADIENTS=false  # Check for NaN/Inf in gradients

# ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
# NOTES
# ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
# For GPU support, ensure PyTorch is installed with CUDA:
# pip install torch==2.4.0 torchvision==0.19.0 --index-url https://download.pytorch.org/whl/cu118
#
# For best reproducibility:
# - Set DETERMINISTIC=true
# - Use fixed RANDOM_SEED
# - Set BENCHMARK=false
# - Use PRECISION=float64
#
# For best performance (training):
# - Set BENCHMARK=true (if reproducibility not critical)
# - Use PRECISION=float32 (for Stage 1)
# - Increase OMP_NUM_THREADS to match CPU cores
